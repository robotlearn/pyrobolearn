<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from hyq.urdf.xacro                 | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="hyq" xmlns:xacro="http://ros.org/wiki/xacro">
  <!-- kin limits (sign ref is RH leg)-->
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_controller_manager">
      <robotNamespace>/hyq</robotNamespace>
      <robotSimType>dls_gazebo_interface/DLSHWSim</robotSimType>
      <controlPeriod>0.004</controlPeriod>
    </plugin>
    <plugin filename="libgazebo_ros_p3d.so" name="gazebo_ros_p3d">
      <robotNamespace>/hyq</robotNamespace>
      <bodyName>trunk</bodyName>
      <topicName>ground_truth</topicName>
      <frameName>world</frameName>
      <xyzOffsets>0 0 0</xyzOffsets>
      <rpyOffsets>0 0 0</rpyOffsets>
      <gaussianNoise>0</gaussianNoise>
      <alwaysOn>true</alwaysOn>
      <updateRate>250.0</updateRate>
    </plugin>
  </gazebo>
  <!-- Now we can start using the macros included above to define the actual HyQ -->
  <!-- The first use of a macro. This one was defined in trunk.urdf.xacro above.
A macro like this will expand to a set of link and joint definitions, and to additional
Gazebo-related extensions (sensor plugins, etc). The macro takes an argument, name,
that equals "base", and uses it to generate names for its component links and joints
(e.g., base_link). The included origin block is also an argument to the macro. By convention,
the origin block defines where the component is w.r.t its parent (in this case the parent
is the world frame). For more, see http://ros.org/wiki/xacro -->
  <!-- Floating-base Joint -->
  <!--joint name="floating_base" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="trunk"/>
  </joint>
  <!-- Links -->
  <!-- Footprint link -->
  <!--link name="base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.01"/>
      </geometry>
    </visual>
  </link>
  <!-- ***********  MODEL COLORS *********** -->
  <material name="black">
    <color rgba="0.1 0.1 0.1 1"/>
  </material>
  <material name="white">
    <color rgba="0.9 0.9 0.9 1"/>
  </material>
  <material name="dark_gray">
    <color rgba="0.3 0.3 0.3 1"/>
  </material>
  <material name="gray">
    <color rgba="0.5 0.5 0.5 1"/>
  </material>
  <material name="light_gray">
    <color rgba="0.7 0.7 0.7 1"/>
  </material>
  <!-- Trunk link -->
  <link name="trunk">
    <inertial>
      <origin xyz="0.056 0.0215 0.00358"/>
      <mass value="60.96"/>
      <inertia ixx="1.5725937" ixy="0.028375" ixz="-0.203139" iyy="8.5015928" iyz="-0.004462" izz="9.1954911"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <material name="gray"/>
      <geometry>
        <mesh filename="meshes/trunk/trunk.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/trunk/trunk.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="trunk">
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
  </gazebo>
  <!-- <xacro:cart   parent="trunk">
        <origin xyz="-0.6 0 0" rpy="0 0 0"/>
    </xacro:cart>-->
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="lf_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 3.14159265359" xyz="0.3735 0.207 0"/>
    <parent link="trunk"/>
    <child link="lf_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="lf_hfe_joint" type="revolute">
    <origin rpy="1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="lf_hipassembly"/>
    <child link="lf_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-0.872664625997" upper="1.2217304764" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-0.872664625997" soft_upper_limit="1.2217304764"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="lf_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="lf_upperleg"/>
    <child link="lf_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-2.44346095279" upper="-0.349065850399" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-2.44346095279" soft_upper_limit="-0.349065850399"/>
    <!-- Foot joint -->
  </joint>
  <joint name="lf_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.346 0 0"/>
    <parent link="lf_lowerleg"/>
    <child link="lf_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="lf_hipassembly">
    <inertial>
      <origin xyz="0.04263         0.0         0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="-4e-05" ixz="-0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="lf_upperleg">
    <inertial>
      <origin xyz="0.15074 -0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="-0.00302" ixz="0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="lf_lowerleg">
    <inertial>
      <origin xyz="0.1254 4e-05 -0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="6e-05" ixz="-1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/lowerleg.stl" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679 0" xyz="0.173 0 0"/>
      <geometry>
        <cylinder length="0.346" radius="0.02"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="lf_foot">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
    <visual>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <!-- Hip assembly -->
  <transmission name="lf_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="lf_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="lf_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="lf_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lf_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lf_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lf_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lf_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="lf_shin_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>lf_lowerleg_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="lf_shin_bumper">
        <bumperTopicName>/hyq/lf_shin_bumper</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="lf_foot">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="lf_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>lf_lowerleg_fixed_joint_lump__lf_foot_collision_1</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="lf_foot_bumper">
        <bumperTopicName>/hyq/lf_foot_bumper</bumperTopicName>
        <frameName>base_link</frameName>
        <robotNamespace>hyq</robotNamespace>
      </plugin>
    </sensor>
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="rf_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 0" xyz="0.3735 -0.207 0"/>
    <parent link="trunk"/>
    <child link="rf_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="rf_hfe_joint" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="rf_hipassembly"/>
    <child link="rf_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-0.872664625997" upper="1.2217304764" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-0.872664625997" soft_upper_limit="1.2217304764"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="rf_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="rf_upperleg"/>
    <child link="rf_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-2.44346095279" upper="-0.349065850399" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-2.44346095279" soft_upper_limit="-0.349065850399"/>
    <!-- Foot joint -->
  </joint>
  <joint name="rf_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.346 0 0"/>
    <parent link="rf_lowerleg"/>
    <child link="rf_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="rf_hipassembly">
    <inertial>
      <origin xyz="0.04263         -0.0         -0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="4e-05" ixz="0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="rf_upperleg">
    <inertial>
      <origin xyz="0.15074 -0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="-0.00302" ixz="0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="rf_lowerleg">
    <inertial>
      <origin xyz="0.1254 4e-05 -0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="6e-05" ixz="-1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/lowerleg.stl" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679 0" xyz="0.173 0 0"/>
      <geometry>
        <cylinder length="0.346" radius="0.02"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="rf_foot">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
    <visual>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <!-- Hip assembly -->
  <transmission name="rf_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="rf_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="rf_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="rf_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rf_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rf_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rf_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rf_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="rf_shin_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>rf_lowerleg_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="rf_shin_bumper">
        <bumperTopicName>/hyq/rf_shin_bumper</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="rf_foot">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="rf_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>rf_lowerleg_fixed_joint_lump__rf_foot_collision_1</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="rf_foot_bumper">
        <bumperTopicName>/hyq/rf_foot_bumper</bumperTopicName>
        <frameName>base_link</frameName>
        <robotNamespace>hyq</robotNamespace>
      </plugin>
    </sensor>
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="lh_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 3.14159265359" xyz="-0.3735 0.207 0"/>
    <parent link="trunk"/>
    <child link="lh_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="lh_hfe_joint" type="revolute">
    <origin rpy="1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="lh_hipassembly"/>
    <child link="lh_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-1.2217304764" upper="0.872664625997" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-1.2217304764" soft_upper_limit="0.872664625997"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="lh_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="lh_upperleg"/>
    <child link="lh_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="0.349065850399" upper="2.44346095279" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="0.349065850399" soft_upper_limit="2.44346095279"/>
    <!-- Foot joint -->
  </joint>
  <joint name="lh_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.346 0 0"/>
    <parent link="lh_lowerleg"/>
    <child link="lh_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="lh_hipassembly">
    <inertial>
      <origin xyz="0.04263         -0.0         -0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="4e-05" ixz="0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="lh_upperleg">
    <inertial>
      <origin xyz="0.15074 0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="0.00302" ixz="-0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="lh_lowerleg">
    <inertial>
      <origin xyz="0.1254 -4e-05 0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="-6e-05" ixz="1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/lowerleg.stl" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679  0" xyz="0.173 0 0"/>
      <geometry>
        <cylinder length="0.346" radius="0.02"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="lh_foot">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
    <visual>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <!-- Hip assembly -->
  <transmission name="lh_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="lh_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="lh_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="lh_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lh_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lh_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lh_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lh_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="lh_shin_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>lh_lowerleg_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="lh_shin_bumper">
        <bumperTopicName>/hyq/lh_shin_bumper</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="lh_foot">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="lh_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>lh_lowerleg_fixed_joint_lump__lh_foot_collision_1</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="lh_foot_bumper">
        <bumperTopicName>/hyq/lh_foot_bumper</bumperTopicName>
        <frameName>base_link</frameName>
        <robotNamespace>hyq</robotNamespace>
      </plugin>
    </sensor>
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="rh_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 0" xyz="-0.3735 -0.207 0"/>
    <parent link="trunk"/>
    <child link="rh_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="rh_hfe_joint" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="rh_hipassembly"/>
    <child link="rh_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="-1.2217304764" upper="0.872664625997" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="-1.2217304764" soft_upper_limit="0.872664625997"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="rh_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="rh_upperleg"/>
    <child link="rh_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150" lower="0.349065850399" upper="2.44346095279" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="50" k_velocity="10" soft_lower_limit="0.349065850399" soft_upper_limit="2.44346095279"/>
    <!-- Foot joint -->
  </joint>
  <joint name="rh_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.346 0 0"/>
    <parent link="rh_lowerleg"/>
    <child link="rh_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="rh_hipassembly">
    <inertial>
      <origin xyz="0.04263         0.0         0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="-4e-05" ixz="-0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/hipassembly.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="rh_upperleg">
    <inertial>
      <origin xyz="0.15074 0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="0.00302" ixz="-0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <material name="light_gray"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/upperleg.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="rh_lowerleg">
    <inertial>
      <origin xyz="0.1254 -4e-05 0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="-6e-05" ixz="1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/leg/lowerleg.stl" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679  0" xyz="0.173 0 0"/>
      <geometry>
        <cylinder length="0.346" radius="0.02"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="rh_foot">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
    <visual>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <!-- Hip assembly -->
  <transmission name="rh_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="rh_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="rh_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="rh_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rh_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rh_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rh_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rh_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="rh_shin_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>rh_lowerleg_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="rh_shin_bumper">
        <bumperTopicName>/hyq/rh_shin_bumper</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="rh_foot">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <maxVel>1.0</maxVel>
    <maxContacts>1</maxContacts>
    <sensor name="rh_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>250.0</update_rate>
      <contact>
        <collision>rh_lowerleg_fixed_joint_lump__rh_foot_collision_1</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="rh_foot_bumper">
        <bumperTopicName>/hyq/rh_foot_bumper</bumperTopicName>
        <frameName>base_link</frameName>
        <robotNamespace>hyq</robotNamespace>
      </plugin>
    </sensor>
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Joint -->
  <joint name="trunk_imu_joint" type="fixed">
    <origin rpy="0 -3.14159265359 0" xyz="0.290 0.000 0.0999214"/>
    <parent link="trunk"/>
    <child link="trunk_imu"/>
  </joint>
  <!-- Link -->
  <link name="trunk_imu">
    <inertial>
      <origin xyz="-0.00020  0.00010  0.00110"/>
      <mass value="0.018"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.00485 0 -0.00105"/>
      <geometry>
        <box size="0.0329 0.0244 0.0111"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 0.9"/>
      </material>
    </visual>
  </link>
  <gazebo>
    <plugin filename="libgazebo_ros_imu.so" name="trunk_imu_controller">
      <alwaysOn>true</alwaysOn>
      <updateRate>250</updateRate>
      <bodyName>trunk_imu</bodyName>
      <topicName>trunk_imu_1/data</topicName>
      <gaussianNoise>4e-08</gaussianNoise>
      <xyzOffset>0 0 0</xyzOffset>
      <rpyOffset>0 0 0</rpyOffset>
      <serviceName>/trunk_imu_imu</serviceName>
    </plugin>
  </gazebo>
  <!-- Imu definition required for DLS hardware interface of ros control -->
  <gazebo reference="trunk_imu">
    <sensor name="trunk_imu" type="imu">
      <always_on>1</always_on>
      <update_rate>250</update_rate>
      <imu>
        <noise>
          <type>gaussian</type>
          <rate>
            <mean>0</mean>
            <stddev>0.0002</stddev>
            <bias_mean>0.00087</bias_mean>
            <bias_stddev>8e-07</bias_stddev>
          </rate>
          <accel>
            <mean>0</mean>
            <stddev>0.017</stddev>
            <bias_mean>0.002</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </accel>
        </noise>
      </imu>
    </sensor>
  </gazebo>
  <!-- Joint -->
  <joint name="kvh_imu_joint" type="fixed">
    <origin rpy="0 -3.14159265359 0" xyz="0.352845 0.0029 0.0503678"/>
    <parent link="trunk"/>
    <child link="kvh_imu"/>
  </joint>
  <!-- Link -->
  <link name="kvh_imu">
    <inertial>
      <origin xyz="-0.001  0.0005  -0.00405"/>
      <mass value="0.7"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0213 -0.0029 -0.00155"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.0737" radius="0.0482"/>
      </geometry>
      <material name="aluminium">
        <color rgba="0.35 0.35 0.35 1"/>
      </material>
    </visual>
  </link>
  <gazebo>
    <plugin filename="libgazebo_ros_imu.so" name="kvh_imu_controller">
      <alwaysOn>true</alwaysOn>
      <updateRate>250</updateRate>
      <bodyName>kvh_imu</bodyName>
      <topicName>kvh_imu/data</topicName>
      <gaussianNoise>4e-08</gaussianNoise>
      <xyzOffset>0 0 0</xyzOffset>
      <rpyOffset>0 0 0</rpyOffset>
      <serviceName>/kvh_imu_imu</serviceName>
    </plugin>
  </gazebo>
  <!-- Imu definition required for DLS hardware interface of ros control -->
  <gazebo reference="kvh_imu">
    <sensor name="kvh_imu" type="imu">
      <always_on>1</always_on>
      <update_rate>250</update_rate>
      <imu>
        <noise>
          <type>gaussian</type>
          <rate>
            <mean>0</mean>
            <stddev>0.0002</stddev>
            <bias_mean>0.00087</bias_mean>
            <bias_stddev>8e-07</bias_stddev>
          </rate>
          <accel>
            <mean>0</mean>
            <stddev>0.017</stddev>
            <bias_mean>0.002</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </accel>
        </noise>
      </imu>
    </sensor>
  </gazebo>
  <!-- Hokuyo -->
  <!--xacro:hokuyo_laser
		name="laser"
		parent="trunk"
		ros_topic="scan" 
		update_rate="10" 
		min_angle="-5"
		max_angle="5"
		range="4.0">
            <origin xyz="0.475 0.0 -0.08823" rpy="${PI} 0.0 0"/>
	</xacro:hokuyo_laser-->
  <joint name="trunk_head_root_joint" type="fixed">
    <origin rpy="0 0.515 0" xyz="0.661 0.00 0.112"/>
    <parent link="trunk"/>
    <child link="head_root"/>
  </joint>
  <!-- Multisense joints -->
  <link name="head_root">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <joint name="head_root_joint" type="fixed">
    <parent link="head_root"/>
    <child link="head"/>
  </joint>
  <joint name="multisense/left_camera_optical_joint" type="continuous">
    <parent link="multisense/left_camera_optical_frame"/>
    <child link="multisense/motor"/>
    <origin rpy="0.00196935 0.00780759 2.06496" xyz="0.027155533433 -0.0971753746271 -0.0172099247575"/>
  </joint>
  <joint name="multisense/motor_joint" type="continuous">
    <parent link="multisense/motor"/>
    <child link="multisense/spindle"/>
    <axis xyz="0 0 1"/>
  </joint>
  <joint name="multisense/spindle_joint" type="continuous">
    <parent link="multisense/spindle"/>
    <child link="multisense/hokuyo_link"/>
    <origin rpy="-0.00223496 -0.0227575 -1.53777e-12" xyz="0.000662488571834 0.00996151566505 -7.18757200957e-6"/>
  </joint>
  <joint name="multisense/head_hokuyo_frame_joint" type="fixed">
    <!--
		This transform accounts for the fact ROS expects laser data in the x forward,
		y left, z up frame and the calibraton has the data in x left, y up, z forward.
		Thus a roll of -90 * a pitch of -90 will make the appropriate transform. Note
		Roll and pitch are both with respect to the origional x left, y up, z forward frame
		-->
    <origin rpy="-1.57079632679 -1.57079632679 0.0" xyz="0 0 0"/>
    <parent link="multisense/hokuyo_link"/>
    <child link="multisense/head_hokuyo_frame"/>
  </joint>
  <!-- Stereo Camera -->
  <joint name="multisense/left_camera_frame_joint" type="fixed">
    <!-- optical frame collocated with tilting DOF -->
    <origin xyz="0.0 0.035 -0.002"/>
    <parent link="head"/>
    <child link="multisense/left_camera_frame"/>
  </joint>
  <joint name="multisense/left_camera_optical_frame_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0 0 0"/>
    <parent link="multisense/left_camera_frame"/>
    <child link="multisense/left_camera_optical_frame"/>
  </joint>
  <joint name="multisense/right_camera_frame_joint" type="fixed">
    <origin xyz="0.0 -0.035 -0.002"/>
    <parent link="head"/>
    <child link="multisense/right_camera_frame"/>
  </joint>
  <joint name="multisense/right_camera_optical_frame_joint" type="fixed">
    <origin rpy="-1.5708 0.0 -1.5708" xyz="0 0 0"/>
    <parent link="multisense/right_camera_frame"/>
    <child link="multisense/right_camera_optical_frame"/>
  </joint>
  <joint name="multisense/center_top_led_frame_joint" type="fixed">
    <origin xyz="0.01125 0.0 0.0105"/>
    <parent link="head"/>
    <child link="multisense/center_top_led_frame"/>
  </joint>
  <joint name="multisense/center_bottom_led_frame_joint" type="fixed">
    <origin xyz="0.01125 0.0 -0.0155"/>
    <parent link="head"/>
    <child link="multisense/center_bottom_led_frame"/>
  </joint>
  <joint name="multisense/left_led_frame_joint" type="fixed">
    <origin rpy="0 -0.15 0.53" xyz="-0.01443 0.07452 0.050346"/>
    <parent link="head"/>
    <child link="multisense/left_led_frame"/>
  </joint>
  <joint name="multisense/right_led_frame_joint" type="fixed">
    <origin rpy="0 -0.15 -0.53" xyz="-0.01443 -0.07452 0.050346"/>
    <parent link="head"/>
    <child link="multisense/right_led_frame"/>
  </joint>
  <joint name="multisense/head_imu_joint" type="fixed">
    <parent link="head"/>
    <child link="multisense/head_imu_link"/>
    <!-- putting it at the same z-level as the stereo -->
    <origin rpy="0 0 0" xyz="-0.0475 0.035 0.0"/>
  </joint>
  <joint name="multisense/accel_joint" type="fixed">
    <origin rpy="0 1.5707 0" xyz="-.0475 .0302 -.00275"/>
    <parent link="head_root"/>
    <child link="multisense/accel"/>
  </joint>
  <joint name="multisense/mag_joint" type="fixed">
    <origin rpy="0 1.5707 0" xyz="-.0475 .0302 -.00275"/>
    <parent link="head_root"/>
    <child link="multisense/mag"/>
  </joint>
  <joint name="multisense/gyro_joint" type="fixed">
    <origin rpy="1.5707 3.14159 1.5707 " xyz="-.0476 .0388 -.00075"/>
    <parent link="head_root"/>
    <child link="multisense/gyro"/>
  </joint>
  <!-- Multisense links -->
  <link name="head">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.075493 3.3383E-05 0.02774"/>
      <!--<mass value="1.4199" />-->
      <mass value="0.001"/>
      <inertia ixx="0.0039688" ixy="-1.5797E-06" ixz="-0.00089293" iyy="0.0041178" iyz="-6.8415E-07" izz="0.0035243"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/head/head.stl"/>
      </geometry>
      <material name="">
        <color rgba="0.9098 0.44314 0.031373 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0503 0 -0.00195"/>
      <geometry>
        <box size="0.1311 0.12 0.0591"/>
      </geometry>
    </collision>
  </link>
  <link name="multisense/motor">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/spindle">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/hokuyo_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.012428 0.0004084 -0.0041835"/>
      <mass value="0.001"/>
      <inertia ixx="3.7174E-05" ixy="4.9927E-08" ixz="1.1015E-05" iyy="4.2412E-05" iyz="-9.8165E-09" izz="4.167E-05"/>
    </inertial>
    <visual>
      <origin rpy="-1.9179632679 -1.57079632679 0" xyz="-.03 -.1 0"/>
      <geometry>
        <mesh filename="meshes/head/head_camera.stl"/>
      </geometry>
      <material name="">
        <color rgba="0.72941 0.35686 0.023529 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.03 0 0.0235"/>
      <geometry>
        <cylinder length="0.047" radius="0.024425"/>
      </geometry>
    </collision>
  </link>
  <link name="multisense/head_hokuyo_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/left_camera_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/left_camera_optical_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/right_camera_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/right_camera_optical_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/center_top_led_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/center_bottom_led_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/left_led_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <link name="multisense/right_led_frame">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <!-- IMU Frames, Mag/Accel and Gyro -->
  <!-- Include transfrom to the left_camera_frame (shift in -.035mm in X and -.002mm in Z) -->
  <!-- imu link -->
  <link name="multisense/head_imu_link">
    <inertial>
      <mass value="1e-5"/>
      <!-- collocate with parent link and remove mass from it -->
      <origin rpy="0 0 0" xyz="-0.122993 0.035033383 0.02774"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.01 0.01"/>
      </geometry>
    </visual>
  </link>
  <link name="multisense/accel">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
  <link name="multisense/mag">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
  <link name="multisense/gyro">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
  <gazebo reference="head_root">
    <mu1>0.9</mu1>
    <mu2>0.9</mu2>
  </gazebo>
  <gazebo reference="head">
    <mu1>0.9</mu1>
    <mu2>0.9</mu2>
  </gazebo>
  <gazebo reference="multisense/hokuyo_link">
    <mu1>0.9</mu1>
    <mu2>0.9</mu2>
  </gazebo>
  <gazebo reference="multisense/head_hokuyo_frame">
    <mu1>0.9</mu1>
    <mu2>0.9</mu2>
  </gazebo>
  <gazebo reference="multisense/motor_joint">
    <implicitSpringDamper>1</implicitSpringDamper>
  </gazebo>
  <gazebo reference="multisense/left_camera_optical_joint">
    <implicitSpringDamper>1</implicitSpringDamper>
  </gazebo>
  <gazebo reference="multisense/spindle_joint">
    <implicitSpringDamper>1</implicitSpringDamper>
  </gazebo>
  <gazebo reference="multisense/head_hokuyo_frame">
    <sensor name="head_hokuyo_sensor" type="gpu_ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>false</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>1081</samples>
            <resolution>1</resolution>
            <min_angle>-2.356194</min_angle>
            <max_angle>2.356194</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.10</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <!-- Noise parameters based on published spec for Hokuyo laser
						achieving "+-30mm" accuracy at range < 10m.  A mean of 0.0m and
						stddev of 0.01m will put 99.7% of samples within 0.03m of the true
						reading. -->
          <mean>0.0</mean>
          <!-- mfallon: if stddev > 0, points at max range e.g. 30m
            (i.e. returns not observing anything) will return less than max
            range e.g. 29.8m. This then messes up the laser filter chain.
            this seems to be fixed in more recent versions of gazebo
            -->
          <stddev>0.0</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_gpu_laser.so" name="multisense/head_hokuyo_controller">
        <topicName>multisense/lidar_scan</topicName>
        <frameName>multisense/head_hokuyo_frame</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="multisense/left_camera_frame">
    <sensor name="multisense/stereo_camera" type="multicamera">
      <!-- see MultiSenseSLPlugin.h for available modes -->
      <update_rate>10.0</update_rate>
      <camera name="left">
        <!-- Spec sheet says 80deg X 45deg @ 1024x544pix.  Based on feedback
				from teams, we're instead doing 80deg X 80deg @ 800x800pix. -->
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>1024</width>
          <height>1024</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <!-- Noise is sampled independently per pixel on each frame.  
					That pixel's noise value is added to each of its color
					channels, which at that point lie in the range [0,1].
					The stddev value of 0.007 is based on experimental data 
					from a camera in a Sandia hand pointed at a static scene
					in a couple of different lighting conditions.  -->
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <camera name="right">
        <pose>0 -0.07 0 0 0 0</pose>
        <!-- Spec sheet says 80deg X 45deg @ 1024x544pix.  Based on feedback
				from teams, we're instead doing 80deg X 80deg @ 800x800pix. -->
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>1024</width>
          <height>1024</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <!-- Noise is sampled independently per pixel on each frame.  
					That pixel's noise value is added to each of its color
					channels, which at that point lie in the range [0,1].
					The stddev value of 0.007 is based on experimental data 
					from a camera in a Sandia hand pointed at a static scene
					in a couple of different lighting conditions.  -->
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <plugin filename="libgazebo_ros_multicamera.so" name="multisense/stereo_camera_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <cameraName>multisense/camera</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>multisense/left_camera_optical_frame</frameName>
        <rightFrameName>multisense/right_camera_optical_frame</rightFrameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="multisense/head_imu_link">
    <!-- this is expected to be reparented to head with appropriate offset
			when head_imu_link is reduced by fixed joint reduction -->
    <!-- todo: this is working with gazebo 1.4, need to write a unit test -->
    <sensor name="multisense/head_imu_sensor" type="imu">
      <always_on>1</always_on>
      <update_rate>1000.0</update_rate>
      <imu>
        <noise>
          <type>gaussian</type>
          <!-- 						Noise parameters from Boston Dynamics
						(http://gazebosim.org/wiki/Sensor_noise):
						rates (rad/s): mean=0, stddev=2e-4
						accels (m/s/s): mean=0, stddev=1.7e-2
						rate bias (rad/s): 5e-6 - 1e-5
						accel bias (m/s/s): 1e-1
						Experimentally, simulation provide rates with noise of
						about 1e-3 rad/s and accels with noise of about 1e-1 m/s/s.
						So we don't expect to see the noise unless number of inner iterations
						are increased.

						We will add bias.  In this model, bias is sampled once for rates
						and once for accels at startup; the sign (negative or positive)
						of each bias is then switched with equal probability.  Thereafter,
						the biases are fixed additive offsets.  We choose
						bias means and stddevs to produce biases close to the provided
						data. -->
          <rate>
            <mean>0.0</mean>
            <stddev>2e-4</stddev>
            <bias_mean>0.0000075</bias_mean>
            <bias_stddev>0.0000008</bias_stddev>
          </rate>
          <accel>
            <mean>0.0</mean>
            <stddev>1.7e-2</stddev>
            <bias_mean>0.1</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </accel>
        </noise>
      </imu>
    </sensor>
  </gazebo>
  <gazebo>
    <plugin filename="libMultiSenseSLPlugin.so" name="multisense_plugin"/>
  </gazebo>
  <!-- Joints -->
  <joint name="asus_joint" type="fixed">
    <origin rpy="0.0 1.0 0.0" xyz="0.62 0.0 0.024"/>
    <parent link="trunk"/>
    <child link="asus_mount_link"/>
  </joint>
  <!-- asus ir sensor physical attachment -->
  <joint name="asus_depth_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.009 0.045 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_depth_frame"/>
  </joint>
  <!-- asus xtion ir sensor frame -->
  <joint name="asus_depth_optical_frame_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0.009 0.045 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_depth_optical_frame"/>
  </joint>
  <!-- asus_xtion rgb sensor physical attachment -->
  <joint name="asus_rgb_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.009 0.01875 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_rgb_frame"/>
  </joint>
  <!-- asus xtion rgb sensor frame -->
  <joint name="asus_rgb_optical_frame_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0.009 0.01875 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_rgb_optical_frame"/>
  </joint>
  <!-- Links -->
  <link name="asus_mount_link">
    <inertial>
      <mass value="0.001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 1.57079632679" xyz="0 0 0"/>
      <geometry>
        <mesh filename="meshes/sensors/asus_xtion.stl" scale="1 1 1"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.035"/>
      <geometry>
        <box size="0.05 .18 0.035"/>
      </geometry>
    </collision>
  </link>
  <!-- ir sensor link -->
  <link name="asus_depth_frame">
    <inertial>
      <mass value="0.001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </collision>
  </link>
  <!-- ir optical sensor link -->
  <link name="asus_depth_optical_frame">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
  <!-- rgb sensor link -->
  <link name="asus_rgb_frame">
    <inertial>
      <mass value="0.001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </collision>
  </link>
  <!-- rgb optical sensor link -->
  <link name="asus_rgb_optical_frame">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link> <!-- in pybullet, the inertia need to be specified even for dummy links, otherwise it will put an identity inertia and a mass of 1 by default -->
  <gazebo reference="asus_depth_frame">
    <sensor name="asus_depth_frame_depth_sensor" type="depth">
      <always_on>true</always_on>
      <update_rate>30.0</update_rate>
      <camera>
        <horizontal_fov>1.01229096616</horizontal_fov>
        <image>
          <format>L8</format>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.48</near>
          <far>3.5</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="asus_depth_frame_controller">
        <baseline>0.2</baseline>
        <alwaysOn>true</alwaysOn>
        <updateRate>30.0</updateRate>
        <cameraName>asus_ir</cameraName>
        <imageTopicName>/asus/depth/image_raw</imageTopicName>
        <cameraInfoTopicName>/asus/depth/camera_info</cameraInfoTopicName>
        <depthImageTopicName>/asus/depth/image_raw</depthImageTopicName>
        <depthImageCameraInfoTopicName>/asus/depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudTopicName>/asus/depth/points</pointCloudTopicName>
        <frameName>asus_depth_optical_frame</frameName>
        <pointCloudCutoff>0.5</pointCloudCutoff>
        <distortionK1>0.00000001</distortionK1>
        <distortionK2>0.00000001</distortionK2>
        <distortionK3>0.00000001</distortionK3>
        <distortionT1>0.00000001</distortionT1>
        <distortionT2>0.00000001</distortionT2>
        <CxPrime>0</CxPrime>
        <Cx>0</Cx>
        <Cy>0</Cy>
        <focalLength>0</focalLength>
        <hackBaseline>0</hackBaseline>
      </plugin>
    </sensor>
    <material value="Gazebo/Red"/>
  </gazebo>
  <gazebo reference="asus_rgb_frame">
    <sensor name="asus_rgb_frame_rgb_sensor" type="depth">
      <always_on>true</always_on>
      <update_rate>30.0</update_rate>
      <camera>
        <horizontal_fov>1.01229096616</horizontal_fov>
        <image>
          <format>R8G8B8</format>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.48</near>
          <far>3.5</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="asus_rgb_frame_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>30.0</updateRate>
        <cameraName>asus_rgb</cameraName>
        <imageTopicName>/asus/rgb/image_raw</imageTopicName>
        <cameraInfoTopicName>/asus/rgb/camera_info</cameraInfoTopicName>
        <depthImageTopicName>/asus/depth/image_raw</depthImageTopicName>
        <depthImageCameraInfoTopicName>/asus/depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudTopicName>/asus/depth_registered/points</pointCloudTopicName>
        <frameName>asus_rgb_optical_frame</frameName>
        <pointCloudCutoff>0.5</pointCloudCutoff>
        <distortionK1>0.00000001</distortionK1>
        <distortionK2>0.00000001</distortionK2>
        <distortionK3>0.00000001</distortionK3>
        <distortionT1>0.00000001</distortionT1>
        <distortionT2>0.00000001</distortionT2>
        <CxPrime>0</CxPrime>
        <Cx>0</Cx>
        <Cy>0</Cy>
        <focalLength>0</focalLength>
        <hackBaseline>0</hackBaseline>
      </plugin>
    </sensor>
    <material value="Gazebo/Red"/>
  </gazebo>
</robot>
